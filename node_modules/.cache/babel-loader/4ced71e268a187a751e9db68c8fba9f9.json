{"ast":null,"code":"import _regeneratorRuntime from\"/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{createContext,useEffect,useState}from\"react\";import{account}from'../appwrite/appwriteConsig';import{jsx as _jsx}from\"react/jsx-runtime\";var AuthContext=/*#__PURE__*/createContext({isAuthenticated:false,onLogOut:function onLogOut(){},onLogin:function onLogin(){}});export var AuthContextProvider=function AuthContextProvider(props){var _useState=useState(),_useState2=_slicedToArray(_useState,2),userData=_useState2[0],setUserData=_useState2[1];useEffect(function(){var getUser=account.get();getUser.then(function(res){setUserData(res);},function(err){console.log(err);});},[]);var logOutHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return account.deleteSession(\"current\");case 3:setUserData(false);window.location.href=\"/\";_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return function logOutHandler(){return _ref.apply(this,arguments);};}();var loginHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setUserData(true);case 1:case\"end\":return _context2.stop();}}},_callee2);}));return function loginHandler(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{isAuthenticated:userData,onLogOut:logOutHandler,onLogin:loginHandler},children:props.children});};export default AuthContext;","map":{"version":3,"names":["createContext","useEffect","useState","account","AuthContext","isAuthenticated","onLogOut","onLogin","AuthContextProvider","props","userData","setUserData","getUser","get","then","res","err","console","log","logOutHandler","deleteSession","window","location","href","loginHandler","children"],"sources":["/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/src/contex/auth-contex.js"],"sourcesContent":["import { createContext, useEffect, useState } from \"react\";\nimport { account } from '../appwrite/appwriteConsig';\n\nconst AuthContext = createContext({\n    isAuthenticated: false,\n    onLogOut: () => {},\n    onLogin: () => {}\n});\n\n\n\nexport const AuthContextProvider = (props) => {\n\n    const [userData, setUserData] = useState()\n    \n    useEffect(() => {\n        const getUser = account.get()\n\n        getUser.then(res => {\n            setUserData(res)\n        }, err => {\n            console.log(err)\n        })\n\n    }, [])\n\n    const logOutHandler = async () => {\n        try {\n            await account.deleteSession(\"current\")\n            setUserData(false)\n            window.location.href = \"/\";\n        } catch (err) {\n            console.log(err)\n        }\n    }\n\n    const loginHandler = async () => {\n        setUserData(true)\n    }\n    \n\n\n\n    return <AuthContext.Provider value={{\n            isAuthenticated: userData,\n            onLogOut: logOutHandler,\n            onLogin: loginHandler\n        }}>\n        {props.children}\n    </AuthContext.Provider>;\n}\n\nexport default AuthContext;"],"mappings":"0bAAA,OAASA,aAAT,CAAwBC,SAAxB,CAAmCC,QAAnC,KAAmD,OAAnD,CACA,OAASC,OAAT,KAAwB,4BAAxB,C,2CAEA,GAAMC,YAAW,cAAGJ,aAAa,CAAC,CAC9BK,eAAe,CAAE,KADa,CAE9BC,QAAQ,CAAE,mBAAM,CAAE,CAFY,CAG9BC,OAAO,CAAE,kBAAM,CAAE,CAHa,CAAD,CAAjC,CAQA,MAAO,IAAMC,oBAAmB,CAAG,QAAtBA,oBAAsB,CAACC,KAAD,CAAW,CAE1C,cAAgCP,QAAQ,EAAxC,wCAAOQ,QAAP,eAAiBC,WAAjB,eAEAV,SAAS,CAAC,UAAM,CACZ,GAAMW,QAAO,CAAGT,OAAO,CAACU,GAAR,EAAhB,CAEAD,OAAO,CAACE,IAAR,CAAa,SAAAC,GAAG,CAAI,CAChBJ,WAAW,CAACI,GAAD,CAAX,CACH,CAFD,CAEG,SAAAC,GAAG,CAAI,CACNC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACH,CAJD,EAMH,CATQ,CASN,EATM,CAAT,CAWA,GAAMG,cAAa,4FAAG,2KAERhB,QAAO,CAACiB,aAAR,CAAsB,SAAtB,CAFQ,QAGdT,WAAW,CAAC,KAAD,CAAX,CACAU,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAuB,GAAvB,CAJc,+EAMdN,OAAO,CAACC,GAAR,cANc,oEAAH,kBAAbC,cAAa,0CAAnB,CAUA,GAAMK,aAAY,6FAAG,0IACjBb,WAAW,CAAC,IAAD,CAAX,CADiB,wDAAH,kBAAZa,aAAY,2CAAlB,CAOA,mBAAO,KAAC,WAAD,CAAa,QAAb,EAAsB,KAAK,CAAE,CAC5BnB,eAAe,CAAEK,QADW,CAE5BJ,QAAQ,CAAEa,aAFkB,CAG5BZ,OAAO,CAAEiB,YAHmB,CAA7B,UAKFf,KAAK,CAACgB,QALJ,EAAP,CAOH,CAvCM,CAyCP,cAAerB,YAAf"},"metadata":{},"sourceType":"module"}