{"ast":null,"code":"import _toConsumableArray from\"/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from'react';import{account}from'../appwrite/appwriteConsig';import{databases}from'../appwrite/appwriteConsig';import Message from'../components/Message';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Chat=function Chat(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(),_useState4=_slicedToArray(_useState3,2),userData=_useState4[0],setUserData=_useState4[1];var messageInputRef=useRef('');useEffect(function(){var getUser=account.get();getUser.then(function(res){setUserData(res);},function(err){console.log(err);});},[]);useEffect(function(){databases.listDocuments('62e2cd74dcfeb086b86f').then(function(res){setMessages(res.documents);},function(err){console.log(err);});},[]);var handleSubmit=function handleSubmit(e){e.preventDefault();var messageInput=messageInputRef.current.value;databases.createDocument(\"62e2cd74dcfeb086b86f\",'unique()',{message:messageInput,name:userData.name}).then(function(res){setMessages([].concat(_toConsumableArray(messages),[{message:messageInput,name:userData.name}]));},function(err){console.log(err);});messageInputRef.current.value='';};return/*#__PURE__*/_jsx(\"div\",{className:\"mt-10\",children:userData&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"welcome text-center\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"text-2xl font-bold\",children:[\"Hello \",/*#__PURE__*/_jsxs(\"span\",{className:\"text-blue-700\",children:[userData.name,\",\"]})]}),/*#__PURE__*/_jsx(\"p\",{children:\"You can chat with strangers and make some friends.\"}),/*#__PURE__*/_jsx(\"h2\",{children:\"You should behave in this chat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative mx-4 mt-10 bg-gray-200 h-full rounded-md md:mx-40 flex flex-col justify-between mb-40 pb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"messages ml-4 mt-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"font-bold text-blue-700 text-xl\",children:\"RectJs Room\"}),messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:\"each-message\",children:/*#__PURE__*/_jsx(Message,{message:message.message,name:message.name})},index);})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"flex px-2 w-[70%] mx-auto rounded-md h-[50px] items-end gap-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"message\",children:/*#__PURE__*/_jsx(\"input\",{ref:messageInputRef,className:\"outline-none bg-transparent border-2 border-orange-400 h-8 rounded px-2\",type:\"text\",placeholder:\"Message \\uD83E\\uDD29\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"\",children:/*#__PURE__*/_jsx(\"button\",{className:\"bg-orange-400 w-20 text-center rounded-md h-8\",children:\"Send\"})})]})]})]})});};export default Chat;","map":{"version":3,"names":["React","useState","useEffect","useRef","account","databases","Message","Chat","messages","setMessages","userData","setUserData","messageInputRef","getUser","get","then","res","err","console","log","listDocuments","documents","handleSubmit","e","preventDefault","messageInput","current","value","createDocument","message","name","map","index"],"sources":["/Users/jibrilkala/Documents/Challenges/appwrite-chat-app/src/pages/Chat.js"],"sourcesContent":["import React, {useState, useEffect, useRef} from 'react'\nimport { account } from '../appwrite/appwriteConsig'\nimport { databases } from '../appwrite/appwriteConsig'\nimport Message from '../components/Message'\n\n\nconst Chat = () => {\n\n    const [messages, setMessages] = useState([])\n\n    const [userData, setUserData] = useState()\n\n    const messageInputRef = useRef('')\n\n    useEffect(() => {\n        const getUser = account.get()\n\n        getUser.then(res => {\n            setUserData(res)\n        }, err => {\n            console.log(err)\n        })\n\n    }, [])\n\n    useEffect(() => {\n        databases.listDocuments('62e2cd74dcfeb086b86f').then(res => {\n            setMessages(res.documents)\n        }, err => {\n            console.log(err)\n        })\n    }, [])\n\n    const handleSubmit = (e) => {\n        e.preventDefault()\n\n        const messageInput = messageInputRef.current.value\n\n        databases.createDocument(\"62e2cd74dcfeb086b86f\", 'unique()', {\n            message: messageInput,\n            name: userData.name\n        }).then(res => {\n            setMessages([...messages, {message: messageInput, name: userData.name}])\n        }, err => {\n            console.log(err)\n        })\n\n        messageInputRef.current.value = ''\n        \n\n    }\n  return (\n    <div className='mt-10'>\n        {userData && (\n            <>\n                <div className=\"welcome text-center\">\n                    <h1 className='text-2xl font-bold'>Hello <span className='text-blue-700'>{userData.name},</span></h1>\n                    <p>You can chat with strangers and make some friends.</p>\n                    <h2>You should behave in this chat</h2>\n                </div>\n                <div className=\"relative mx-4 mt-10 bg-gray-200 h-full rounded-md md:mx-40 flex flex-col justify-between mb-40 pb-2\">\n                    <div className=\"messages ml-4 mt-4\">\n                        <h2 className='font-bold text-blue-700 text-xl'>RectJs Room</h2>\n                        {messages.map((message, index) => {\n                            return <div key={index} className=\"each-message\">\n                                <Message message={message.message} name={message.name}/>\n                            </div>\n                        })}\n                    </div>\n\n                    <form onSubmit={handleSubmit} className='flex px-2 w-[70%] mx-auto rounded-md h-[50px] items-end gap-2'>\n                        <div className=\"message\">\n                            <input ref={messageInputRef} className='outline-none bg-transparent border-2 border-orange-400 h-8 rounded px-2' type=\"text\" placeholder='Message ðŸ¤©' />\n                        </div>\n                        <div className=\"\">\n                            <button className='bg-orange-400 w-20 text-center rounded-md h-8'>Send</button>\n                        </div>\n                    </form>\n                </div>\n            </>\n        )}\n    </div>\n  )\n}\n\nexport default Chat"],"mappings":"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"},"metadata":{},"sourceType":"module"}